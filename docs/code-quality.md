# 程式碼品質檢查指南

本文檔說明如何使用專案中的程式碼品質檢查工具，以及如何區分未使用的變數和預留給未來開發的變數。

## 自動化程式碼品質檢查

我們提供了自動化的程式碼品質檢查工具，可以檢查程式碼風格、類型錯誤和格式問題。

### 基本使用

```bash
# 執行基本檢查
npm run lint

# 自動修復可修復的問題
npm run lint:fix

# 顯示詳細輸出
npm run lint:verbose
```

### 檢查流程

自動化檢查工具會執行以下檢查：

1. **ESLint 檢查**：檢查程式碼風格和潛在問題
2. **TypeScript 編譯器檢查**：檢查類型錯誤
3. **Prettier 格式檢查**：檢查程式碼格式

## 未使用變數與未來開發變數

在開發過程中，我們經常會遇到未使用的變數。這些變數可能是：

1. **真正未使用的變數**：這些變數應該被移除或重命名
2. **有意未使用的變數**：這些變數暫時不使用，但有特定目的
3. **預留給未來開發的變數**：這些變數是為未來功能預留的

### 命名約定

為了區分這些不同類型的變數，我們採用以下命名約定：

- **未使用的變數**：正常命名，但會被 ESLint 標記為錯誤
- **有意未使用的變數**：以 `_` 開頭，例如 `_unusedParam`
- **預留給未來開發的變數**：以 `_future_` 開頭，例如 `_future_featureFlag`

### 檢查未來開發變數

我們提供了專門的工具來檢查和管理預留給未來開發的變數：

```bash
# 檢查未來開發變數
npm run lint:future

# 生成未來開發變數文檔
npm run lint:future:fix

# 顯示詳細輸出
npm run lint:future:verbose
```

## 最佳實踐

### 處理未使用的變數

1. **移除真正未使用的變數**：如果變數確實不需要，應該移除它
2. **標記有意未使用的變數**：如果變數暫時不使用但有特定目的，以 `_` 開頭命名
3. **標記未來開發變數**：如果變數是為未來功能預留的，以 `_future_` 開頭命名

### 文檔化未來開發變數

對於預留給未來開發的變數，建議在代碼中添加註釋說明其用途：

```typescript
// 預留給未來的權限檢查功能
const _future_permissionCheck = true;

// 預留給未來的多語言支持
const _future_languageSupport = {
  enabled: false,
  defaultLanguage: "en",
};
```

## 自動化檢查流程

在 CI/CD 流程中，可以添加以下步驟來確保程式碼品質：

```yaml
# 在 CI/CD 配置中添加
steps:
  - name: 檢查程式碼品質
    run: npm run lint

  - name: 檢查未來開發變數
    run: npm run lint:future
```

## 故障排除

### ESLint 報告未使用的變數

如果 ESLint 報告未使用的變數，但你希望保留它，有兩種選擇：

1. **有意未使用**：將變數重命名為以 `_` 開頭
2. **未來開發**：將變數重命名為以 `_future_` 開頭

### TypeScript 編譯器錯誤

TypeScript 編譯器可能會報告類型錯誤，這些錯誤通常需要手動修復。常見的錯誤包括：

1. **缺少類型定義**：安裝相應的 `@types` 包
2. **類型不匹配**：修正類型定義或變數使用

### Prettier 格式問題

Prettier 格式問題通常可以通過 `npm run lint:fix` 自動修復。
